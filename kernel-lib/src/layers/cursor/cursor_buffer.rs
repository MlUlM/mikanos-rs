use alloc::vec::Vec;
use core::iter::repeat;

use common_lib::math::rectangle::Rectangle;
use common_lib::math::size::Size;
use common_lib::math::vector::Vector2D;

use crate::gop::pixel::mapper::enum_pixel_mapper::EnumPixelMapper;
use crate::gop::pixel::pixel_frame::PixelFrame;
use crate::gop::pixel::pixel_iter::PixelIter;
use crate::layers::cursor::cursor_colors::CursorColors;
use crate::layers::cursor::cursor_pixel_iter::CursorPixelIter;

pub const CURSOR_WIDTH: usize = 15;

pub const CURSOR_HEIGHT: usize = 24;


pub(crate) const CURSOR_SHAPE: [&[u8; CURSOR_WIDTH]; CURSOR_HEIGHT] = [
    b"@              ",
    b"@@             ",
    b"@.@            ",
    b"@..@           ",
    b"@...@          ",
    b"@....@         ",
    b"@.....@        ",
    b"@......@       ",
    b"@.......@      ",
    b"@........@     ",
    b"@.........@    ",
    b"@..........@   ",
    b"@...........@  ",
    b"@............@ ",
    b"@......@@@@@@@@",
    b"@......@       ",
    b"@....@@.@      ",
    b"@...@ @.@      ",
    b"@..@   @.@     ",
    b"@.@    @.@     ",
    b"@@      @.@    ",
    b"@       @.@    ",
    b"         @.@   ",
    b"         @@@   ",
];

#[derive(Debug, Clone)]
#[repr(transparent)]
pub struct CursorBuffer(Vec<Vec<u8>>);


impl CursorBuffer {
    pub fn new(scale: Vector2D<usize>) -> CursorBuffer {
        let scaled_cursor_shape: Vec<Vec<u8>> = CURSOR_SHAPE
            .map(|row| {
                row.iter()
                    .flat_map(|p| repeat(*p).take(scale.x()))
                    .collect::<Vec<u8>>()
            })
            .into_iter()
            .flat_map(|row| repeat(row).take(scale.y()))
            .collect();

        CursorBuffer(scaled_cursor_shape)
    }


    pub fn no_scale() -> CursorBuffer {
        Self::new(Vector2D::unit())
    }


    pub fn size(&self) -> Size {
        Size::new(self.width(), self.height())
    }


    pub fn rect(&self) -> Rectangle<usize> {
        Rectangle::from_size(self.size())
    }


    pub fn height(&self) -> usize {
        self.0.len()
    }


    pub fn width(&self) -> usize {
        self.0[0].len()
    }


    pub fn cursor_pixels(
        &self,
        origin_pos: Vector2D<usize>,
        end_pos: Option<Vector2D<usize>>,
        colors: CursorColors,
    ) -> impl PixelIter + '_ {
        CursorPixelIter::new(
            &self.0,
            origin_pos,
            end_pos,
            colors.foreground(),
            colors.border(),
        )
    }


    pub fn pixel_frame(
        &self,
        origin_pos: Vector2D<usize>,
        end_pos: Option<Vector2D<usize>>,
        colors: CursorColors,
        converter: EnumPixelMapper,
    ) -> PixelFrame {
        let iter = CursorPixelIter::new(
            &self.0,
            origin_pos,
            end_pos,
            colors.foreground(),
            colors.border(),
        );
        PixelFrame::new(iter, converter, colors.transparent())
    }


    #[cfg(test)]
    fn is_drawable(&self, window_rect: Rectangle<usize>, cursor_pos: Vector2D<usize>) -> bool {
        if !window_rect
            .size()
            .into_rect()
            .with_in_rect(&self.rect())
        {
            return false;
        }

        let cursor_pos = cursor_pos + self.size().as_vec2d();
        window_rect.with_in_pos(&cursor_pos)
    }


    #[cfg(test)]
    fn is_not_drawable(&self, layer_rect: Rectangle<usize>, cursor_pos: Vector2D<usize>) -> bool {
        !self.is_drawable(layer_rect, cursor_pos)
    }
}


impl Default for CursorBuffer {
    fn default() -> Self {
        Self::no_scale()
    }
}


#[cfg(test)]
mod tests {
    use alloc::vec::Vec;

    use common_lib::array::array_eq;
    use common_lib::math::rectangle::Rectangle;
    use common_lib::math::vector::Vector2D;

    use crate::layers::cursor::cursor_buffer::{
        CursorBuffer, CURSOR_HEIGHT, CURSOR_SHAPE, CURSOR_WIDTH,
    };

    #[test]
    fn it_no_scale() {
        let cursor_buff = CursorBuffer::no_scale();
        let buff = cursor_buff
            .0
            .iter()
            .map(|row| row.as_slice())
            .collect::<Vec<&[u8]>>();
        let buff = buff.as_slice();

        CURSOR_SHAPE
            .into_iter()
            .zip(buff)
            .for_each(|(e, a)| assert!(array_eq(e, a)));
    }


    #[test]
    fn it_x_scale2() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(2, 1));
        let buff = cursor_buff
            .0
            .iter()
            .map(|row| row.as_slice())
            .collect::<Vec<&[u8]>>();

        let buff = buff.as_slice();
        assert_eq!(buff[0].len(), CURSOR_WIDTH * 2);

        CURSOR_SHAPE_X_SCALE2
            .into_iter()
            .zip(buff)
            .for_each(|(e, a)| assert!(array_eq(e, a)));
    }


    #[test]
    fn it_y_scale2() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(1, 2));
        let buff = cursor_buff
            .0
            .iter()
            .map(|row| row.as_slice())
            .collect::<Vec<&[u8]>>();

        let buff = buff.as_slice();
        assert_eq!(buff.len(), CURSOR_HEIGHT * 2);

        CURSOR_SHAPE_Y_SCALE2
            .into_iter()
            .zip(buff)
            .for_each(|(e, a)| assert!(array_eq(e, a)));
    }


    #[test]
    fn it_scale2() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(2, 2));
        let buff = cursor_buff
            .0
            .iter()
            .map(|row| row.as_slice())
            .collect::<Vec<&[u8]>>();

        let buff = buff.as_slice();

        CURSOR_SHAPE_SCALE2
            .into_iter()
            .zip(buff)
            .for_each(|(e, a)| assert!(array_eq(e, a)));
    }


    #[test]
    fn it_scale10() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(10, 10));
        let buff = cursor_buff
            .0
            .iter()
            .map(|row| row.as_slice())
            .collect::<Vec<&[u8]>>();

        let buff = buff.as_slice();

        CURSOR_SHAPE_SCALE10
            .into_iter()
            .zip(buff)
            .for_each(|(e, a)| assert!(array_eq(e, a)));
    }


    #[test]
    fn it_drawable() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(1, 1));
        assert!(cursor_buff.is_drawable(
            Rectangle::new(Vector2D::zeros(), Vector2D::new(30, 30)),
            Vector2D::unit(),
        ))
    }


    #[test]
    fn it_not_drawable_when_cursor_shape_is_over_layer_size() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(10, 10));
        assert!(cursor_buff.is_not_drawable(
            Rectangle::new(Vector2D::zeros(), Vector2D::new(30, 30)),
            Vector2D::unit(),
        ))
    }


    #[test]
    fn it_not_drawable_when_cursor_position_exceeds_layer() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(1, 1));
        assert!(cursor_buff.is_not_drawable(
            Rectangle::new(Vector2D::zeros(), Vector2D::new(30, 30)),
            Vector2D::new(30, 30),
        ))
    }


    #[test]
    fn it_not_drawable_when_cursor_position_exceeds_layer_width() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(1, 1));
        assert!(cursor_buff.is_not_drawable(
            Rectangle::new(Vector2D::zeros(), Vector2D::new(10 - 1 + CURSOR_WIDTH, 30)),
            Vector2D::new(10, 0),
        ))
    }


    #[test]
    fn it_not_drawable_when_cursor_position_exceeds_layer_height() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(1, 1));
        assert!(cursor_buff.is_not_drawable(
            Rectangle::new(
                Vector2D::zeros(),
                Vector2D::new(CURSOR_WIDTH, 17 - 1 + CURSOR_HEIGHT),
            ),
            Vector2D::new(0, 17),
        ))
    }


    #[test]
    fn it_not_drawable_when_cursor_position_exceeds_layer_height_and_width() {
        let cursor_buff = CursorBuffer::new(Vector2D::new(1, 1));
        assert!(cursor_buff.is_not_drawable(
            Rectangle::new(
                Vector2D::zeros(),
                Vector2D::new(110 - 1 + CURSOR_WIDTH, 17 - 1 + CURSOR_HEIGHT),
            ),
            Vector2D::new(110, 17),
        ))
    }


    const CURSOR_SHAPE_X_SCALE2: [&[u8; CURSOR_WIDTH * 2]; CURSOR_HEIGHT] = [
        b"@@                            ",
        b"@@@@                          ",
        b"@@..@@                        ",
        b"@@....@@                      ",
        b"@@......@@                    ",
        b"@@........@@                  ",
        b"@@..........@@                ",
        b"@@............@@              ",
        b"@@..............@@            ",
        b"@@................@@          ",
        b"@@..................@@        ",
        b"@@....................@@      ",
        b"@@......................@@    ",
        b"@@........................@@  ",
        b"@@............@@@@@@@@@@@@@@@@",
        b"@@............@@              ",
        b"@@........@@@@..@@            ",
        b"@@......@@  @@..@@            ",
        b"@@....@@      @@..@@          ",
        b"@@..@@        @@..@@          ",
        b"@@@@            @@..@@        ",
        b"@@              @@..@@        ",
        b"                  @@..@@      ",
        b"                  @@@@@@      ",
    ];


    const CURSOR_SHAPE_Y_SCALE2: [&[u8; CURSOR_WIDTH]; CURSOR_HEIGHT * 2] = [
        b"@              ",
        b"@              ",
        b"@@             ",
        b"@@             ",
        b"@.@            ",
        b"@.@            ",
        b"@..@           ",
        b"@..@           ",
        b"@...@          ",
        b"@...@          ",
        b"@....@         ",
        b"@....@         ",
        b"@.....@        ",
        b"@.....@        ",
        b"@......@       ",
        b"@......@       ",
        b"@.......@      ",
        b"@.......@      ",
        b"@........@     ",
        b"@........@     ",
        b"@.........@    ",
        b"@.........@    ",
        b"@..........@   ",
        b"@..........@   ",
        b"@...........@  ",
        b"@...........@  ",
        b"@............@ ",
        b"@............@ ",
        b"@......@@@@@@@@",
        b"@......@@@@@@@@",
        b"@......@       ",
        b"@......@       ",
        b"@....@@.@      ",
        b"@....@@.@      ",
        b"@...@ @.@      ",
        b"@...@ @.@      ",
        b"@..@   @.@     ",
        b"@..@   @.@     ",
        b"@.@    @.@     ",
        b"@.@    @.@     ",
        b"@@      @.@    ",
        b"@@      @.@    ",
        b"@       @.@    ",
        b"@       @.@    ",
        b"         @.@   ",
        b"         @.@   ",
        b"         @@@   ",
        b"         @@@   ",
    ];

    const CURSOR_SHAPE_SCALE2: [&[u8; CURSOR_WIDTH * 2]; CURSOR_HEIGHT * 2] = [
        b"@@                            ",
        b"@@                            ",
        b"@@@@                          ",
        b"@@@@                          ",
        b"@@..@@                        ",
        b"@@..@@                        ",
        b"@@....@@                      ",
        b"@@....@@                      ",
        b"@@......@@                    ",
        b"@@......@@                    ",
        b"@@........@@                  ",
        b"@@........@@                  ",
        b"@@..........@@                ",
        b"@@..........@@                ",
        b"@@............@@              ",
        b"@@............@@              ",
        b"@@..............@@            ",
        b"@@..............@@            ",
        b"@@................@@          ",
        b"@@................@@          ",
        b"@@..................@@        ",
        b"@@..................@@        ",
        b"@@....................@@      ",
        b"@@....................@@      ",
        b"@@......................@@    ",
        b"@@......................@@    ",
        b"@@........................@@  ",
        b"@@........................@@  ",
        b"@@............@@@@@@@@@@@@@@@@",
        b"@@............@@@@@@@@@@@@@@@@",
        b"@@............@@              ",
        b"@@............@@              ",
        b"@@........@@@@..@@            ",
        b"@@........@@@@..@@            ",
        b"@@......@@  @@..@@            ",
        b"@@......@@  @@..@@            ",
        b"@@....@@      @@..@@          ",
        b"@@....@@      @@..@@          ",
        b"@@..@@        @@..@@          ",
        b"@@..@@        @@..@@          ",
        b"@@@@            @@..@@        ",
        b"@@@@            @@..@@        ",
        b"@@              @@..@@        ",
        b"@@              @@..@@        ",
        b"                  @@..@@      ",
        b"                  @@..@@      ",
        b"                  @@@@@@      ",
        b"                  @@@@@@      ",
    ];


    const CURSOR_SHAPE_SCALE10: [&[u8; CURSOR_WIDTH * 10]; CURSOR_HEIGHT * 10] = [
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@                                                                                                                                            ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                                                                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                                                                                                        ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@....................@@@@@@@@@@                                                                                                              ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@..............................@@@@@@@@@@                                                                                                    ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@........................................@@@@@@@@@@                                                                                          ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@..................................................@@@@@@@@@@                                                                                ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@......................................................................@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@................................................................................@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@..........................................................................................@@@@@@@@@@                                        ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@....................................................................................................@@@@@@@@@@                              ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@..............................................................................................................@@@@@@@@@@                    ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@........................................................................................................................@@@@@@@@@@          ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@............................................................@@@@@@@@@@                                                                      ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@........................................@@@@@@@@@@@@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@..............................@@@@@@@@@@          @@@@@@@@@@..........@@@@@@@@@@                                                            ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@....................@@@@@@@@@@                              @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@..........@@@@@@@@@@                                        @@@@@@@@@@..........@@@@@@@@@@                                                  ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@@@@@@@@@@@                                                            @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"@@@@@@@@@@                                                                      @@@@@@@@@@..........@@@@@@@@@@                                        ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@..........@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
        b"                                                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              ",
    ];
}
